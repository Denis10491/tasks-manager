(()=>{"use strict";const e=()=>JSON.parse(localStorage.getItem("tasks"))??[],t=()=>{let t=e();document.querySelectorAll("#delete").forEach((e=>{e.addEventListener("click",(function(){a(this,t)}))}))},n=()=>{let e=document.getElementById("createTask"),t=document.getElementById("createTaskLength"),n=e.value.length??0;n>70&&(e.value=e.value.substr(0,70),n=70),n>0?t.classList.add("create__input_length-null"):t.classList.remove("create__input_length-null"),t.innerText=`${e.value.length}/70`},s=(e,t)=>{let n=document.createElement("div");return n.classList.add("tasks__item"),n.setAttribute("id",e),n.innerHTML=`\n        <div class="tasks__text">\n            <p class="text__item">${t}</p>\n        </div>\n        <div class="tasks__control">\n            <button class="tasks__delete tasks_but" id="delete">&#128473;</button>\n        </div>\n    `,n},a=function(e,n){let s=e.parentNode.parentNode,a=[];Object.keys(n).map((e=>{e!=s.id&&a.push(n[e])})),localStorage.setItem("tasks",JSON.stringify(a)),l(),t()},l=()=>{let n=e(),a=Object.values(n).map((e=>e)).sort(((e,t)=>new Date(e.id)-new Date(t.id))),l=document.getElementById("tasksList");l.innerHTML="",Object.keys(a).map((e=>{l.append(s(e,a[e].text))})),t()};l(),document.getElementById("createTask").addEventListener("input",(()=>n())),document.getElementById("form-create").addEventListener("submit",(()=>{event.preventDefault(),(()=>{let t=document.getElementById("createTask"),a=(new Date).toUTCString(),l=e(),d=l.length,c=t.value,i=s(d,c);c.length>0&&(document.querySelector(".tasks__list").append(i),l.push({id:a,text:c}),localStorage.setItem("tasks",JSON.stringify(l)),t.value="",n())})(),l()})),t()})();